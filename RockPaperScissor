#!/usr/bin/env python3
# -*- coding: utf-8 -*-

import random
import sys

# --- Setup -------------------------------------------------------------

# 4 former med emojis (du kan ændre rækkefølgen/ikonerne hvis du vil)
SHAPES = {
    1: ("🦎", "Lizard"),
    2: ("✂️", "Scissors"),
    3: ("📄", "Paper"),
    4: ("✊", "Rock"),
}

# Regler: Hver form slår præcis én anden form (cyklisk 4-spil)
# 1 slår 3, 2 slår 1, 3 slår 4, 4 slår 2
BEATS = {
    1: {3},
    2: {1},
    3: {4},
    4: {2},
}

WIN_SCORE = 5

# --- Hjælpere ----------------------------------------------------------

def print_menu():
    print("Welcome to  🪨 ✂️  📄  🦎  !")
    print("(s) Single player")
    print("(e) Exit")

def print_shape_prompt():
    # Eksempelvis: "01  || 1🦎  || 2✂️  || 3📄  || 4✊ : "
    parts = []
    for k in sorted(SHAPES.keys()):
        parts.append(f"{k}{SHAPES[k][0]}")
    line = " || ".join(parts)
    print("\nSelect a shape:")
    print(f"0️⃣0️⃣  || {line} : ", end="", flush=True)

def read_menu_choice():
    print_menu()
    choice = input("Select an item: ").strip().lower()
    return choice

def read_shape_key():
    while True:
        print_shape_prompt()
        raw = input().strip()
        if not raw.isdigit():
            print("❌ Shape key must be a number. Try again.")
            continue
        key = int(raw)
        if key not in SHAPES:
            print(f"❌ Shape key {key} does not exist. Try again.")
            continue
        return key

def round_result(player_key, agent_key):
    if player_key == agent_key:
        return "tie"
    if agent_key in BEATS[player_key]:
        return "player"
    if player_key in BEATS[agent_key]:
        return "agent"
    # Fallback (burde ikke ske med vores BEATS)
    return "tie"

def icons_row(player_key, agent_key):
    p_icon = SHAPES[player_key][0]
    a_icon = SHAPES[agent_key][0]
    # Ligner den kompakte ikonlinje i eksemplet
    return f"👤{p_icon}  🤖{a_icon}"

# --- Spillet -----------------------------------------------------------

def play_single():
    print("Starting game 🎉")
    player = 0
    agent = 0

    while player < WIN_SCORE and agent < WIN_SCORE:
        key = read_shape_key()
        agent_key = random.choice(list(SHAPES.keys()))
        print(f"Agent: {agent_key}")

        res = round_result(key, agent_key)
        if res == "player":
            player += 1
        elif res == "agent":
            agent += 1
        # uafgjort giver ingen point

        print(icons_row(key, agent_key))
        print(f"{player}:{agent}")

        if player < WIN_SCORE and agent < WIN_SCORE:
            print("...")

    # Slutbesked
    if player > agent:
        print("You won! 🎉")
    else:
        print("Agent won!")

def main():
    while True:
        choice = read_menu_choice()
        if choice == "e":
            print("Goodbye!")
            sys.exit(0)
        elif choice == "s":
            play_single()
        else:
            print("Please choose 's' or 'e'.")

if __name__ == "__main__":
    main()
